import pytest

import tests.cp_mock  # noqa: F401
from flight.apps.adcs.ad import TRIAD


@pytest.mark.parametrize(
    "n1, n2, b1, b2, expected",
    [
        (
            [1, 0, 0.0],
            [0.6, 0.8, 0.0],
            [0.9622641509433965, -0.22641509433962265, -0.15094339622641512],
            [0.69811320754717, 0.5886792452830192, -0.40754716981132083],
            [0.9712858623572642, 0.19425717247145274, -0.09712858623572641, 0.0971285862357264],
        ),
        (
            [0.5111363025481866, 0.38846358993662183, -0.7667044538222799],
            [0.7787611974767475, -0.5710915448162815, 0.25958706582558255],
            [0.37689069252043667, -0.03876920634422086, -0.925446030047622],
            [0.7219459151451108, -0.6004787598154042, 0.3438304154897339],
            [0.9712858623572642, 0.19425717247145274, -0.09712858623572641, 0.0971285862357264],
        ),
        (
            [0.5111363025481866, 0.38846358993662183, -0.7667044538222799],
            [0.7787611974767475, -0.5710915448162815, 0.25958706582558255],
            [-0.055572990938919854, 0.006361552500472726, -0.9984343610512844],
            [-0.29551531111417706, -0.9547601568514725, 0.03322263966097485],
            [0.7273737250166961, 0.007273737250166944, -0.36368686250834814, 0.5818989800133572],
        ),
    ],
)
def test_TRIAD(n1, n2, b1, b2, expected):
    result = TRIAD(n1, n2, b1, b2)
    assert result == pytest.approx(expected, rel=1e-6)
